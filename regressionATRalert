### setiing a chart to give an alert signal
# when price hits the lower band of the Regression Channel
# If the opening chart price is lower than the current center regression line 
# (ie., suggesting bullish)


# Like this: AddLabel(1, Concat(“Long SL =", LL), Color.Cyan);

# ATR lower indicator 
 #compares the daily ATR divided by 92 (23 hours of trading, therefore 92 15-minute increments on the 15 min chart)
 # with another line of the current ATR on the current 15 minute chart



def averageTypeATR = AverageType.WILDERS;
def dayATR = MovingAverage(averageTypeATR, TrueRange(high(period = AggregationPeriod.Day), close(period = AggregationPeriod.Day), low(period = AggregationPeriod.Day)), 14);
AddLabel(1, Concat(“Day ATR", dayATR), Color.Cyan);

# ATR now vs ATR 2 hours ago on the 15 minute chart

declare lower;

def averageTypeATR = AverageType.WILDERS;
def dayATRF = MovingAverage(averageTypeATR, TrueRange(high(period = AggregationPeriod.Day), close(period = AggregationPeriod.Day), low(period = AggregationPeriod.Day)), 14);


plot dayATR =MovingAverage(averageTypeATR, TrueRange(high[92], close[92], low[92]), 14);

plot myATRu = MovingAverage(averageTypeATR, TrueRange(high, close, low), 14);
myATRu.SetDefaultColor(GetColor(4));  
dayATR.SetDefaultColor(GetColor(8));


# gives you the closing price of the first bar on the chart
def bn = BarNumber();
def here = getValue(close, bn-1);
AddLabel(1, Concat("CurrentBar#",  here), Color.Cyan);